/* ==========================================================================
   МОБИЛЬНОЕ МЕНЮ - СТИЛЬ УВЕДОМЛЕНИЯ ПОД ШАПКОЙ
   Анимация выезда сверху, адаптивный фон
   ========================================================================== */

@media (max-width: 768px) {
    
    /* ========== ОБЩИЕ СТИЛИ NAV ========== */
    nav { /* Изначально скрыто */
        display: block !important; /* Должно быть block для расчета высоты, но скрыто через transform/opacity */
        position: fixed !important;
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        height: auto !important; /* Автоматическая высота по контенту */
        z-index: 9990 !important; /* Ниже кнопки меню (9999), но выше основного контента */
        
        /* Начальное состояние для анимации - скрыто сверху */
        transform: translateY(-120%) !important; /* Немного больше 100% для гарантии скрытия */
        opacity: 0 !important;
        visibility: hidden !important;
        
        padding: 15px 20px !important;
        box-sizing: border-box !important;
        transition: transform 0.35s ease-out, opacity 0.3s ease-out, visibility 0s linear 0.35s !important;
    }
    
    /* ========== ПОКАЗ КНОПКИ МЕНЮ ========== */
    .menu-toggle {
        display: block !important;
        /* z-index для menu-toggle уже установлен очень высоким в предыдущих стилях, это хорошо */
    }
    
    /* ========== МОБИЛЬНОЕ МЕНЮ В ОТКРЫТОМ СОСТОЯНИИ (nav.show) ========== */
    nav.show {
        /* Анимация появления - выезд вниз */
        transform: translateY(0%) !important;
        opacity: 1 !important;
        visibility: visible !important;
        transition-delay: 0s, 0s, 0s !important;
    }
    
    /* ========== ФОН И ТЕНИ ДЛЯ ТЕМ ========== */
    body:not([data-theme="dark"]) nav.show {
        background-color: #ffffff !important; /* Чистый белый фон */
        box-shadow: 0 5px 15px rgba(0,0,0,0.1) !important;
        border-bottom: 1px solid #e0e0e0;
    }
    
    [data-theme="dark"] nav.show {
        background-color: #2c2c2c !important; /* Темно-серый фон */
        box-shadow: 0 5px 15px rgba(0,0,0,0.25) !important;
        border-bottom: 1px solid #444444;
    }
    
    /* ========== СПИСОК МЕНЮ ========== */
    nav ul { /* Общий стиль для ul внутри nav, который показывается */
        display: flex !important;
        flex-direction: column !important;
        justify-content: flex-start !important; /* Элементы начинаются сверху */
        align-items: center !important;
        width: 100% !important;
        padding: 0 !important;
        margin: 0 !important;
        list-style: none !important;
        gap: 10px !important; /* Уменьшенный отступ между кнопками */
        overflow-y: auto; /* Прокрутка если много элементов */
        /* max-height будет устанавливаться через JS */
    }
    
    nav.show ul li { /* Используем nav.show для специфичности */
        margin: 0 !important; /* Убираем лишние отступы, gap уже есть */
        width: 100% !important;
        max-width: 350px !important; /* Можно немного шире для такого стиля */
        text-align: center !important;
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
    }
    
    /* ========== КНОПКИ МЕНЮ - СТИЛИСТИКА ОСТАЕТСЯ ПРЕЖНЕЙ (КРАСНЫЕ) ========== */
    nav.show ul li a { /* Ссылки внутри показанного меню */
        color: white !important;
        background-color: rgba(183, 28, 28, 0.75) !important; /* Немного насыщеннее */
        border-radius: 8px !important; /* Чуть менее скругленные */
        padding: 10px 15px !important; /* Компактнее */
        transition: background-color 0.2s ease, transform 0.2s ease !important;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15) !important;
        border: none !important;
        font-weight: 500 !important;
        text-align: center !important;
        font-size: 1.05rem !important; /* Немного меньше */
        width: 100% !important;
        display: block !important;
        text-decoration: none !important;
        cursor: pointer !important;
    }
    
    /* ========== HOVER ЭФФЕКТЫ ДЛЯ КНОПОК ========== */
    nav.show ul li a:hover {
        background-color: rgba(183, 28, 28, 0.9) !important;
        transform: translateY(-1px) !important;
        box-shadow: 0 3px 6px rgba(0,0,0,0.2) !important;
    }
    nav.show ul li a:active {
        transform: translateY(0px) !important;
        background-color: rgba(183, 28, 28, 1) !important;
    }
    
    /* ========== АКТИВНАЯ СТРАНИЦА ========== */
    nav.show ul li a.active {
        background-color: rgba(160, 20, 20, 0.95) !important; /* Глубже красный */
        font-weight: 600 !important;
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.2) !important;
    }
    
    /* ========== УБИРАЕМ ПОДЧЕРКИВАНИЯ (остается актуальным) ========== */
    nav.show ul li a::after,
    nav.show ul li a:hover::after,
    nav.show ul li a.active::after {
        display: none !important;
    }
    
    /* ========== ПЕРЕКЛЮЧАТЕЛЬ ТЕМЫ - АДАПТИРУЕМ ========== */
    nav.show .theme-toggle {
        background-color: rgba(183, 28, 28, 0.75) !important;
        border-radius: 8px !important;
        padding: 10px 15px !important;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15) !important;
        border: none !important;
        margin-top: 5px !important; /* Небольшой отступ сверху */
        cursor: pointer !important;
        position: relative !important;
        width: 100% !important;
        max-width: 350px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        gap: 10px !important;
        transition: background-color 0.2s ease, transform 0.2s ease !important;
    }

    nav.show .theme-toggle:hover {
        background-color: rgba(183, 28, 28, 0.9) !important;
        transform: translateY(-1px) !important;
        box-shadow: 0 3px 6px rgba(0,0,0,0.2) !important;
    }
    
    /* Остальные стили для theme-toggle (checkbox, label, icon) остаются как были, но применяются к nav.show */
    nav.show .theme-toggle .theme-toggle-checkbox {
        position: absolute !important; width: 100% !important; height: 100% !important;
        left: 0 !important; top: 0 !important; margin: 0 !important; cursor: pointer !important;
        opacity: 0 !important; z-index: 10 !important;
    }
    
    nav.show .theme-toggle .theme-toggle-label {
        position: relative !important; display: inline-block !important;
        width: 26px !important; height: 26px !important; /* Немного меньше для компактности */
        background-color: transparent !important; border-radius: 50% !important;
        cursor: pointer !important; transition: transform 0.2s ease !important;
        overflow: hidden !important;
    }
    
    nav.show .theme-toggle:hover .theme-toggle-label {
        transform: scale(1.05) !important;
    }
    
    nav.show .theme-label {
        color: white !important; font-weight: 500 !important; font-size: 1.0rem !important; /* Немного меньше */
        user-select: none !important; -webkit-user-select: none !important;
    }
    
    nav.show .theme-toggle-label:before { /* Это иконка темы */
        color: white !important;
    }
    
    /* ========== БЛОКИРОВКА СКРОЛЛА (body.no-scroll) - БУДЕТ УДАЛЕНА ИЗ JS ========== */
    /* body.no-scroll { ... } - эту секцию можно будет удалить если JS ее больше не использует */
    /* Пока оставим, если вдруг понадобится вернуть, но в JS ее отключим */

    /* Убираем Firefox fallback для backdrop-filter, он больше не используется */
}

/* ========== ДЕСКТОПНАЯ ВЕРСИЯ (без изменений) ========== */
@media (min-width: 769px) {
    .menu-toggle {
        display: none !important;
    }
    
    nav { /* На десктопе nav должен быть видим и стилизован основными стилями styles.css */
        display: block !important; /* Отменяем display:none из мобильных стилей */
        position: static !important; /* Сбрасываем fixed позиционирование */
        transform: none !important; /* Сбрасываем transform */
        opacity: 1 !important; /* Сбрасываем opacity */
        visibility: visible !important; /* Сбрасываем visibility */
        height: auto !important;
        width: auto !important;
        background-color: transparent !important;
        box-shadow: none !important;
        padding: 0 !important;
        border-bottom: none !important;
        /* Другие свойства, которые могли быть добавлены для мобильного меню, здесь сбрасываются до дефолтных или тех, что в styles.css */
    }

    nav ul {
        flex-direction: row !important; /* Возвращаем горизонтальное расположение для десктопа */
        overflow-y: visible !important;
        max-height: none !important;
        gap: 0 !important; /* Отступы между li в styles.css */
    }
     nav ul li {
        margin: 0 0 0 20px !important; /* Оригинальный отступ для десктопа из styles.css (пример) */
        width: auto !important; 
        max-width: none !important;
    }
    nav ul li a {
        padding: 8px 15px !important; /* Оригинальный паддинг для десктопа */
        font-size: 1rem !important; /* Как в styles.css */
        background-color: rgba(183, 28, 28, 0.7) !important; /* Как в styles.css */
        /* Убедиться, что другие стили кнопок (тени, бордеры) соответствуют десктопу */
    }
     nav .theme-toggle { /* Если он виден на десктопе, вернуть его стили */
        margin: 0 0 0 20px !important;
        width: auto !important;
        max-width: none !important;
        padding: 0 !important; /* Часто тема на десктопе просто иконка */
        background-color: transparent !important;
        box-shadow: none !important;
    }
} 